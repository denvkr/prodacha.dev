function Subsys_JsHttpRequest_Js(){this._construct()} (function(){var k=0,f={},h={};Subsys_JsHttpRequest_Js.dataReady=function(b,a,c){var d=f[b];delete f[b];d?(delete d._xmlReq,d.caching&&(h[d.hash]=[a,c]),d._dataReady(a,c)):"undefined"!=typeof d&&alert("ScriptLoader: unknown pending id: "+b)};Subsys_JsHttpRequest_Js.prototype={onreadystatechange:null,readyState:0,responseText:null,responseXML:null,status:200,statusText:"OK",session_name:"PHPSESSID",responseJS:null,caching:!1,_span:null,_id:null,_xmlReq:null,_openArg:null,_reqHeaders:null,dummy:function(){}, abort:function(){if(this._xmlReq)return this._xmlReq.abort();if(this._span){this.readyState=0;if(this.onreadystatechange)this.onreadystatechange();this._cleanupScript()}},open:function(b,a,c,d,e){this._openArg={method:b,url:a,asyncFlag:c,username:null!=d?d:"",password:null!=e?e:""};this._xmlReq=this._id=null;this._reqHeaders=[];return!0},send:function(b){var a=(new Date).getTime()+""+k++;b=this._hash2query(b);var c=this._openArg.url,d=this._getSid();d&&(c+=(0<=c.indexOf("?")?"&":"?")+this.session_name+ "="+this.escape(d));d=this.hash=c+"?"+b;if(this.caching&&h[d])return a=h[d],this._dataReady(a[0],a[1]),!1;d=(this._xmlReq=this._obtainXmlReq(a,c))&&(window.ActiveXObject||this._xmlReq.setRequestHeader);this._xmlReq&&d&&"POST"==(""+this._openArg.method).toUpperCase()?this._openArg.method="POST":(this._openArg.method="GET",c=c+(0<=c.indexOf("?")?"&":"?")+b,b=null);c=c+(0<=c.indexOf("?")?"&":"?")+a;f[a]=this;if(this._xmlReq){a=this._openArg;this._xmlReq.open(a.method,c+"-xml",a.asyncFlag,a.username, a.password);if(d){for(a=0;a<this._reqHeaders.length;a++)this._xmlReq.setRequestHeader(this._reqHeaders[a][0],this._reqHeaders[a][1]);this._xmlReq.setRequestHeader("Content-Type","application/octet-stream")}return this._xmlReq.send(b)}this._obtainScript(a,c);return!0},getAllResponseHeaders:function(){return this._xmlReq?this._xmlReq.getAllResponseHeaders():""},getResponseHeader:function(b){return this._xmlReq?this._xmlReq.getResponseHeader(b):""},setRequestHeader:function(b,a){this._reqHeaders[this._reqHeaders.length]= [b,a]},_construct:function(){},_dataReady:function(b,a){with(this)null!==b||null!==a?(readyState=4,responseText=responseXML=b,responseJS=a):(readyState=0,responseText=responseXML=responseJS=null),onreadystatechange&&onreadystatechange(),_cleanupScript()},_obtainXmlReq:function(b,a){if(a.match(/^[a-z]+:\/\//i))return null;var c=null;if(window.XMLHttpRequest)try{c=new XMLHttpRequest}catch(d){}else if(window.ActiveXObject){try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}if(!c)try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){}}if(c){var g= this;c.onreadystatechange=function(){var a=c.readyState;if(4==a){c.onreadystatechange=g.dummy;a=c.responseText;try{eval(a)}catch(d){Subsys_JsHttpRequest_Js.dataReady(b,"JavaScript code generated by backend is invalid!\n"+a,null)}}else if(g.readyState=a,g.onreadystatechange)g.onreadystatechange()};this._id=b}return c},_obtainScript:function(b,a){with(document){var c=null,c=body.appendChild(createElement("SPAN"));c.style.display="none";c.innerHTML="Text for stupid IE.<script>\x3c/script>";setTimeout(function(){var b= c.getElementsByTagName("script")[0];b.language="JavaScript";b.setAttribute?b.setAttribute("src",a):b.src=a},10);this._id=b;this._span=c}},_cleanupScript:function(){var b=this._span;b&&(this._span=null,setTimeout(function(){b.parentNode.removeChild(b)},50));return!1},_hash2query:function(b,a){null==a&&(a="");var c=[];if(b instanceof Object)for(var d in b){var e=b[d];if(null!=e&&!((e.constructor||{}).prototype||{})[d]){var f=a?a+"["+this.escape(d)+"]":this.escape(d);c[c.length]=e instanceof Object? this._hash2query(e,f):f+"="+this.escape(e)}}else c=[b];return c.join("&")},_getSid:function(){var b=document.location.search.match(RegExp("[&?]"+this.session_name+"=([^&?]*)")),a=null;b?a=b[1]:(b=document.cookie.match(RegExp("(;|^)\\s*"+this.session_name+"=([^;]*)")))&&(a=b[2]);return a},escape:function(b){return escape(b).replace(RegExp("\\+","g"),"%2B")}}})();